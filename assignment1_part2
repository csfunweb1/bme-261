// Pin assignments for RGB LED
const int redPin = 7;
const int greenPin = 5;
const int bluePin = 6;

// Pin for analog light sensor input
const int sensorPin = A0;
int sensorValue; // Stores the light sensor reading

void setup() {
  // Set RGB LED pins as outputs
  pinMode(redPin, OUTPUT);
  pinMode(greenPin, OUTPUT);
  pinMode(bluePin, OUTPUT);

  // Set the sensor pin as input
  pinMode(sensorPin, INPUT);

  // Start serial communication for debugging/calibration
  Serial.begin(9600);
}

void loop() {
  // Read light sensor value (ranges from 0–1023)
  sensorValue = analogRead(sensorPin);

  // Print the sensor value to the Serial Monitor (for calibration)
  Serial.println(sensorValue); 

  // Light-based color decision:
  if (sensorValue < 300) {
    // Dark environment — turn LED red
    setColor(255, 0, 0);
  } else if (sensorValue > 700) {
    // Bright environment — turn LED green (dimmed)
    setColor(0, 50, 0);
  } else {
    // Moderate/ambient light — turn LED blue
    setColor(0, 0, 255);
  }

  // Wait a bit before taking the next reading
  delay(200);
}

// Helper function to set RGB LED color using PWM
void setColor(int red, int green, int blue) {
  analogWrite(redPin, red);     // Set red intensity (0–255)
  analogWrite(greenPin, green); // Set green intensity (0–255)
  analogWrite(bluePin, blue);   // Set blue intensity (0–255)
}
